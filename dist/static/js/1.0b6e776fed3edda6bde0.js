webpackJsonp([1],{"/wwj":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("fZjL"),n=a.n(i),r=a("YaEn"),o=a("1iNP"),l=a("7+uW"),s=a("+4za"),c=a.n(s),d=(a("WC7W"),a("mtWM")),u=a.n(d);l.default.use(c.a);var v={data:function(){return{addDialog:!1,metaDialog:!1,waitingDialog:!1,blockRemoval:!0,enableCustomAttSection:!1,open:!1,fields:[],valid:!0,name:"",description:"",category:"",rank:"",titleRules:[function(e){return!!e||"Title is required"}],select:null,items:[{name:"text",id:"text"},{name:"number",id:"number"},{name:"date",id:"date"}],isChoices:[],errors:null,dialog:!1,ordinals:[],newCategory:null,currentField:null,currentFavorite:null}},computed:{categories:function(){return this.$store.state.categories}},watch:{fields:function(){this.blockRemoval=this.fields.length<=1}},components:{ProgressDialog:o.a},methods:{redirectToFavorites:function(){r.a.push("/favorites/")},openDialog:function(){this.addDialog=!0,this.newCategory={id:"",name:""}},updateCategory:function(){var e=this;0!==this.newCategory.name.length?(this.waitingDialog=!0,this.$store.dispatch("add",{endpoint:"/categories/",payload:{name:this.newCategory.name}}).then(function(t){l.default.$toast.success("New category added successfully",{position:"top"}),e.categories.push(t),e.addDialog=!1}).catch(function(e){l.default.$toast.error(e,{position:"top"})}).finally(function(){e.waitingDialog=!1})):l.default.$toast.error("Category name should not be empty",{position:"top"})},confirmCategory:function(e){var t=this.categories.filter(function(t){return t.id===e});this.ordinals=t?t[0].rankings:[],this.rank=""},updateMetaField:function(){var e=this.fields[this.currentField.index];this.fields.splice(this.currentField.index,1),this.fields.push({name:e.name,type:this.currentField.name,value:this.currentField.value}),this.metaDialog=!1,this.isChoices[this.currentField.index]=!0},confirmChoices:function(e,t){this.currentField={name:e,index:t,value:""},this.metaDialog=!0},validate:function(){var e=this;if(this.$refs.form.validate()){var t={title:this.name,description:this.description,categoryId:this.category,ranking:this.rank,metaData:{}},a={},i=[],n=["title","description","category","ranking"];if(this.fields.forEach(function(e){n.includes(e.name.toLowerCase())&&i.push(e.name+" is entered more than once"),a[e.name]=e.value}),i.length>0)return this.errors=i,void(this.dialog=!0);t.metaData=a,this.waitingDialog=!0;var o="/favorites/"+(this.currentFavorite?this.currentFavorite.id:"");this.$store.dispatch(this.currentFavorite?"update":"add",{endpoint:o,payload:t}).then(function(t){var a="Favorite "+(e.currentFavorite?"updated":"created")+" successfully";l.default.$toast.success(a,{position:"top"}),setTimeout(function(){r.a.push("/favorites")},100)}).catch(function(e){l.default.$toast.error(e,{position:"top"})}).finally(function(){e.waitingDialog=!1})}},addAttribute:function(){this.fields.filter(function(e){return null===e.name||null===e.type}).length>=1&&this.fields.length>0||(this.enableCustomAttSection=!0,this.fields.push({name:null,type:null}))},removeField:function(e){this.blockRemoval||this.fields.splice(e,1)},getCategories:function(){this.$store.dispatch("getCategories")},getFavorite:function(){var e=this;if(this.$route.params.id){var t=this.$store.state.api+"/favorites/"+this.$route.params.id;return u.a.get(t,{headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t.data.data);var a=t.data.data;e.currentFavorite=t.data.data,e.name=a.title,e.description=a.description,e.category=a.category.id;var i=e.categories.filter(function(e){return e.id===a.category.id});e.ordinals=i?i[0].rankings:[],e.rank=a.ranking;var r=[],o=[];n()(a.metaData).forEach(function(e,t){var i={type:"text",name:e,value:a.metaData[e]};r.push(i),o[t]=!0}),e.enableCustomAttSection=!0,e.fields=r,e.isChoices=o})}}},mounted:function(){this.getCategories(),this.getFavorite()}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-flex",{attrs:{"mt-3":"","mb-5":""}},[a("div",{staticClass:"col-sm-10"},[null==e.currentFavorite?a("h2",[e._v("New Favorite")]):e._e(),e._v(" "),e.currentFavorite?a("h2",[e._v("Edit Favorite")]):e._e()])]),e._v(" "),a("v-card",{staticClass:"pa-5"},[a("progress-dialog",{attrs:{waitingDialog:e.waitingDialog}}),e._v(" "),e.newCategory?a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.addDialog,callback:function(t){e.addDialog=t},expression:"addDialog"}},[a("v-card",[a("v-card-title",{staticClass:"body-2"},[e._v("Add Category")]),e._v(" "),a("v-divider"),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Name*"},model:{value:e.newCategory.name,callback:function(t){e.$set(e.newCategory,"name",t)},expression:"newCategory.name"}})],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary darken-1"},on:{click:e.updateCategory}},[e._v("Save")]),e._v(" "),a("v-btn",{attrs:{color:"grey darken-1",outline:""},on:{click:function(t){e.addDialog=!1}}},[e._v("No")])],1)],1)],1):e._e(),e._v(" "),e.currentField?a("v-dialog",{attrs:{persistent:"","max-width":"340"},model:{value:e.metaDialog,callback:function(t){e.metaDialog=t},expression:"metaDialog"}},[a("v-card",["date"===e.currentField.name?a("v-card-title",{staticClass:"body-2"},[e._v("Select "+e._s(e.currentField.name))]):e._e(),e._v(" "),"date"!==e.currentField.name?a("v-card-title",{staticClass:"body-2"},[e._v("Enter "+e._s(e.currentField.name))]):e._e(),e._v(" "),a("v-divider"),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},["text"===e.currentField.name?a("v-text-field",{attrs:{label:e.currentField.name},model:{value:e.currentField.value,callback:function(t){e.$set(e.currentField,"value",t)},expression:"currentField.value"}}):e._e(),e._v(" "),"number"===e.currentField.name?a("v-text-field",{attrs:{label:e.currentField.name,type:"number"},model:{value:e.currentField.value,callback:function(t){e.$set(e.currentField,"value",t)},expression:"currentField.value"}}):e._e(),e._v(" "),"date"===e.currentField.name?a("v-date-picker",{attrs:{scrollable:""},model:{value:e.currentField.value,callback:function(t){e.$set(e.currentField,"value",t)},expression:"currentField.value"}}):e._e()],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary darken-1"},on:{click:e.updateMetaField}},[e._v("Save")]),e._v(" "),a("v-btn",{attrs:{color:"grey darken-1",outline:""},on:{click:function(t){e.metaDialog=!1}}},[e._v("Cancel")])],1)],1)],1):e._e(),e._v(" "),a("v-flex",{attrs:{xs6:"","offset-xs3":"","mb-5":""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{counter:15,rules:e.titleRules,label:"Title",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md5:""}},[a("v-select",{attrs:{items:e.categories,"item-text":"name","item-value":"id",label:"Category"},on:{change:function(t){return e.confirmCategory(t)}},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md1:""}},[a("v-btn",{attrs:{icon:"",title:"Add more categories"}},[a("v-icon",{attrs:{color:"grey"},on:{click:function(t){return e.openDialog()}}},[e._v("add")])],1)],1),e._v(" "),a("v-spacer"),e._v(" "),a("v-flex",{attrs:{xs12:"",sm6:"",md5:""}},[a("v-select",{attrs:{items:e.ordinals,"item-text":"name","item-value":"id",label:"Ranking"},model:{value:e.rank,callback:function(t){e.rank=t},expression:"rank"}})],1)],1),e._v(" "),e.enableCustomAttSection?a("v-flex",{attrs:{"mt-3":""}},[a("v-toolbar",[a("v-toolbar-title",[e._v("Other Information")]),e._v(" "),a("v-spacer")],1)],1):e._e(),e._v(" "),e.enableCustomAttSection?a("v-container",[a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"body-2"},[e._v("Error")]),e._v(" "),a("v-divider"),e._v(" "),a("v-card-text",e._l(e.errors,function(t,i){return a("div",{key:i},[e._v("\n                                    "+e._s(t)+"\n                                ")])}),0),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary darken-1"},on:{click:function(t){e.dialog=!1}}},[e._v("Ok")])],1)],1)],1),e._v(" "),e._l(e.fields,function(t,i){return a("v-layout",{key:i},[a("v-flex",{attrs:{xs12:"",md7:""}},[a("v-text-field",{attrs:{label:"Field name",rules:[function(e){return!!e||"A field name is required"}],value:"",required:""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"field.name"}})],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md4:""}},[null==e.isChoices[i]?a("v-select",{attrs:{"menu-props":"right",items:e.items,"item-text":"name","item-value":"id",rules:[function(e){return!!e||"Field type is required"}],label:"Field Type",required:""},on:{change:function(t){return e.confirmChoices(t,i)}},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"field.type"}}):e._e(),e._v(" "),e.isChoices[i]?a("label",{staticClass:"grey--text lighten-1 caption"},[e._v("Value:")]):e._e(),e._v(" "),a("br"),e._v(" "),e.isChoices[i]?a("label",{staticClass:"subheading text-capitalize"},[e._v(e._s(t.value))]):e._e()],1),e._v(" "),a("v-flex",{attrs:{xs12:"",md1:""}},[a("v-btn",{attrs:{icon:""}},[a("v-icon",{attrs:{color:"red"},on:{click:function(t){return e.removeField(i)}}},[e._v("delete")])],1)],1)],1)})],2):e._e(),e._v(" "),a("v-layout",{attrs:{"mt-2":""}},[a("v-btn",{attrs:{outline:"",color:"success"},on:{click:e.addAttribute}},[a("v-icon",{attrs:{left:"",dark:""}},[e._v("add")]),e._v("Add More Information\n                    ")],1)],1),e._v(" "),a("v-layout",{attrs:{"mt-4":""}},[a("v-btn",{attrs:{disabled:!e.valid,color:"success"},on:{click:e.validate}},[e._v("\n                        Save\n                    ")]),e._v(" "),a("v-btn",{attrs:{outline:"",color:"success"},on:{click:e.redirectToFavorites}},[e._v("\n                        Cancel\n                    ")])],1)],1)],1)],1)],1)},staticRenderFns:[]},m=a("VU/8")(v,f,!1,null,null,null);t.default=m.exports},Cdx3:function(e,t,a){var i=a("sB3e"),n=a("lktj");a("uqUo")("keys",function(){return function(e){return n(i(e))}})},fZjL:function(e,t,a){e.exports={default:a("jFbC"),__esModule:!0}},jFbC:function(e,t,a){a("Cdx3"),e.exports=a("FeBl").Object.keys},uqUo:function(e,t,a){var i=a("kM2E"),n=a("FeBl"),r=a("S82l");e.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],o={};o[e]=t(a),i(i.S+i.F*r(function(){a(1)}),"Object",o)}}});
//# sourceMappingURL=1.0b6e776fed3edda6bde0.js.map